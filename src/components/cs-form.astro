<form>
	<div id="form-div-align">
		<div class="form-div">
			<label for="fname">First Name*</label>
			<input type="text" id="fname" name="fname" maxlength="50" required/>
		</div>
		<div class="form-div">
			<label for="lname">Last Name</label>
			<input type="text" id="lname" name="lname" maxlength="50"/>
		</div>
	</div>
	<div class="form-div">
		<label for="eml">Email*</label>
		<input type="email" id="eml" name="eml" maxlength="100" required/>
	</div>
	<div class="form-div">
		<label for="msg">Message*</label>
		<textarea maxlength="1000" id="msg" required/>
	</div>
	<input type="submit" value="Submit" id="btn-click"/>
</form>

<script>
	let f: HTMLFormElement = document.querySelector('form');
	let l = document.getElementById('loading');
	f.addEventListener('submit', (e) => {
		e.preventDefault();
		f.hidden = true;
		l.hidden = false;
		fetch("/api/add?etkn=95d9d334b7dc7fd211b3", {
			method: "POST",
			mode: "same-origin",
			headers: {
				"Content-Type": "application/json"
			},
			body: JSON.stringify({ name: (document.getElementById('fname') as HTMLInputElement).value,
			lname: (document.getElementById('lname') as HTMLInputElement).value, 
			email: (document.getElementById('eml') as HTMLInputElement).value, 
			msg: (document.getElementById('msg') as HTMLTextAreaElement).value
			}),
		}).then((s) => {
			l.hidden = true;
			f.hidden = false;
			if (s.status === 200) {
				f.reset();
				return alert("Message sent successfully\nWe will get back to you soon!");
			}
			console.error(s);
			alert("An error occured while sending the message\nPlease try again. We apologize for the inconvenience.");
		});
	});
	console.info("Website made by 1Alphabyte (https://git.utsav2.dev/utsav)");
</script>

<style>
	@media (max-width: 480px) {
		form {
			padding: 5vh;
		}
	}
	@media (min-width: 480px) {
		#form-div-align {
			display: flex;
			justify-content: center;
		}
		#fname {
			margin-right: 10px;
		}
		#fname, #lname {
			width: 17.5vw;
		}
		form {
			padding: 10vh;
		}
		input, textarea {
			width: 36.5vw;
		}
	}
	#btn-click {
		padding: 5px;
		margin: 10px 0;
		border: 1px solid #ffd300;
		background-color: #ffd300;
		color: #000;
		transition: .5s;
		width: 37vw;
	}
	#btn-click:hover {
		background-color: transparent;
		color: #ffd300;
		transition: .5s;
	}
	textarea {
		height: 15vh;
	}
	input {
		margin: 10px 0;
	}
	input, textarea {
		padding: 5px;
		border: 1px solid #fff;
		background-color: transparent;
		border-radius: 5px;
		color: #fff;
	}
	.form-div {
		display: flex;
		flex-direction: column;
	}
	label {
		text-align: left;
	}
</style>